"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[121],{38755:function(e,t,n){n.a(e,(async function(e,a){try{var o=n(92714),c=e([o]);o=(c.then?(await c)():c)[0];const l={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},r=(0,o.createElementVNode)("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1),u=[r];function s(e,t){return(0,o.openBlock)(),(0,o.createElementBlock)("svg",l,u)}t["Z"]={name:"ep-plus",render:s},a()}catch(i){a(i)}}))},80589:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{Z:function(){return o.Z}});var o=n(48004),c=e([o]);o=(c.then?(await c)():c)[0],a()}catch(i){a(i)}}))},54582:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{$:function(){return l}});n(33948),n(60285),n(41637);var o=n(55979),c=e([o]);function l(e,t,a=12e4){const c=new Worker(new URL(n.p+n.u(223),n.b)),i=(0,o.p$)(e);return new Promise(((e,n)=>{const o=setTimeout((()=>{n("计算超时")}),a);c.onmessage=n=>{if("ready"===n.data.type)c.postMessage({potentialFunctionInterface:i,artifacts:t});else{const t=n.data.data.results;clearTimeout(o),e(t)}},c.onerror=e=>{n("计算发生错误："+e.message),clearTimeout(o)}})).finally((()=>{c.terminate()}))}o=(c.then?(await c)():c)[0],a()}catch(i){a(i)}}))},51837:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{$o:function(){return i.$},YK:function(){return c.Y},eH:function(){return u}});n(33948);var o=n(86315),c=n(68234),i=(n(94631),n(54582)),l=e([i]);async function u(e,t,n,a){const c=await(0,o.n)();return c.CommonInterface.get_artifacts_rank_by_character(e,t,n,a)}i=(l.then?(await l)():l)[0],a()}catch(r){a(r)}}))},94631:function(e,t,n){n.d(t,{Y:function(){return a}});n(33948),n(60285),n(41637);function a(e,t,a=12e4){const o=new Worker(new URL(n.p+n.u(650),n.b));return new Promise(((n,c)=>{const i=setTimeout((()=>{c("计算超时")}),a);o.onmessage=a=>{if("ready"===a.data.type)o.postMessage({optimizeConfig:e,artifacts:t});else{const e=a.data.data.results;clearTimeout(i),n(e)}},o.onerror=()=>{c("计算发生错误")}})).finally((()=>{o.terminate()}))}},68234:function(e,t,n){n.d(t,{Y:function(){return a}});n(33948),n(60285),n(41637);function a(e,t){const a=new Worker(new URL(n.p+n.u(674),n.b));return new Promise(((n,o)=>{a.onmessage=function(o){const c=o.data.type;if("ready"===c)a.postMessage({input:e,artifacts:t});else if("result"===c){const e=o.data.data.result;a.terminate(),n(e)}},a.onerror=function(e){o(e)}}))}},79407:function(e,t,n){n.a(e,(async function(e,a){try{var o=n(80816),c=n(89804),i=n(92714),l=(n(59853),n(30461)),r=(n(45177),n(43271)),u=(n(71683),n(26689)),s=(n(87228),n(93101)),d=(n(44163),n(7448)),m=(n(75915),n(85630)),p=(n(72142),n(11347)),f=(n(9638),n(33948),n(67637)),h=n(51837),v=n(40969),y=n(80377),g=n(47540),k=n(57703),V=n(80589),b=n(68095),w=n(7502),N=n(86315),B=n(55979),_=n(74148),Z=n(38755),E=n(42894),x=n(19344),C=e([i,h,v,g,k,V,b,w,B,_,Z,E,x,o,c,p,m,d,s,u,r,l]);[i,h,v,g,k,V,b,w,B,_,Z,E,x,o,c,p,m,d,s,u,r,l]=C.then?(await C)():C;const I=e=>((0,i.pushScopeId)("data-v-5a885f0c"),e=e(),(0,i.popScopeId)(),e),S=(0,i.createTextVNode)("In theory, you should not see this"),T={key:1,style:{padding:"0 20px"}},z={style:{"margin-bottom":"12px"}},F=(0,i.createTextVNode)("开始计算"),L=(0,i.createTextVNode)("添加成员"),P={style:{display:"flex","justify-content":"space-between","align-items":"center"},class:"member-header"},U={class:"team-title"},$=I((()=>(0,i.createElementVNode)("p",{class:"common-title2"},"计算预设",-1))),A=I((()=>(0,i.createElementVNode)("p",{class:"common-title2"},"权重",-1))),M={class:"result-item-top"},D=I((()=>(0,i.createElementVNode)("div",{class:"result-item-buttons"},null,-1))),Y={class:"result-item-content"},R={key:1,style:{display:"flex","justify-content":"center"}};t["Z"]=(0,i.defineComponent)({__name:"TeamOptimizationPage",async setup(e){let t,n;const a=(0,b.n)(),C=(0,w.B)(),I=([t,n]=(0,i.withAsyncContext)((()=>(0,N.n)())),t=await t,n(),t),j=(0,i.ref)([null]),H=(0,i.ref)([0]),O=8;function W(){j.value.length!==O?(j.value.push(null),H.value.push(0)):(0,o.z8)({message:"最多支持8个成员",type:"error"})}function K(e){1!==j.value.length&&(j.value.splice(e,1),H.value.splice(e,1))}const q=(0,i.computed)((()=>{let e=[];for(let t of j.value.values())if(t){const n=C.presets.value[t];n&&e.push(n)}return e})),G=(0,i.ref)([]),Q=(0,i.ref)(0),J=(0,i.computed)((()=>0===G.value.length?null:G.value[Q.value]));function X(e){Q.value=e-1}const ee=(0,i.ref)(!1),te=(0,i.ref)(null);function ne(e){let t=[];if(J.value){const n=Object.values(J.value[e]),o=[];for(let e of n){const t=a.artifacts.value.get(e);t&&o.push(t)}t=o.map((e=>(0,f.Lz)(e)))}return{character:q.value[e].item.character,weapon:q.value[e].item.weapon,buffs:q.value[e].item.buffs,artifacts:t}}async function ae(e){const t=ne(e);te.value=await I.CommonInterface.get_attribute(t),ee.value=!0}function oe(e){a.toggleArtifact(e)}const ce=(0,i.computed)((()=>{let e=[];for(let t of a.artifacts.value.values())t.level>=16&&!t.omit&&e.push(t);return e})),ie=(0,i.computed)((()=>ce.value.map(f.Lz))),le=(0,i.computed)((()=>q.value.map((e=>(0,v.DR)(e.item))))),re={mva_step:5,work_space:1e3,max_re_optimize:5,max_search:1e6,count:1e3},ue=(0,i.computed)((()=>({single_interfaces:le.value,weights:H.value,hyper_param:re})));function se(){const e=q.value.length===j.value.length;if(!e)return void(0,o.z8)({message:"请选择计算预设",type:"error"});const t=(0,B.p$)(ue.value),n=ie.value,a=c.kN.service({text:"莫娜占卜中（可能需要数分钟）",lock:!0,fullscreen:!0});(0,h.YK)(t,n).then((e=>{G.value=e.artifacts,Q.value=0})).catch((e=>{var t;(0,o.z8)({message:`计算过程发生错误：${null!==(t=e.message)&&void 0!==t?t:e}`,type:"error"}),console.error(e)})).finally((()=>{a.close()}))}return(e,t)=>{const n=p.GT,o=m.zd,c=d.mi,f=s.BM,h=u.Dv,v=r.d6,b=l.dq;return(0,i.openBlock)(),(0,i.createElementBlock)("div",null,[(0,i.createVNode)(o,{title:"面板",modelValue:ee.value,"onUpdate:modelValue":t[0]||(t[0]=e=>ee.value=e),size:(0,i.unref)(y.B)?"30%":"100%"},{default:(0,i.withCtx)((()=>[te.value?((0,i.openBlock)(),(0,i.createElementBlock)("div",T,[(0,i.createVNode)((0,i.unref)(V.Z),{attribute:te.value},null,8,["attribute"])])):((0,i.openBlock)(),(0,i.createBlock)(n,{key:0},{default:(0,i.withCtx)((()=>[S])),_:1}))])),_:1},8,["modelValue","size"]),(0,i.createVNode)(b,{gutter:16},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(h,{md:6,sm:24,class:"mona-scroll-hidden left"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",z,[(0,i.createVNode)(c,{type:"primary",icon:(0,i.unref)(_.Z),onClick:se},{default:(0,i.withCtx)((()=>[F])),_:1},8,["icon"]),(0,i.createVNode)(c,{icon:(0,i.unref)(Z.Z),onClick:W},{default:(0,i.withCtx)((()=>[L])),_:1},8,["icon"])]),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(j.value,((e,t)=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:t,class:"member-item"},[(0,i.createElementVNode)("div",P,[(0,i.createElementVNode)("p",U,"成员"+(0,i.toDisplayString)(t+1),1),(0,i.createElementVNode)("div",null,[(0,i.createVNode)(c,{circle:"",text:"",icon:(0,i.unref)(E.Z),onClick:e=>K(t),style:{color:"white"}},null,8,["icon","onClick"])])]),$,(0,i.createVNode)(k.Z,{modelValue:j.value[t],"onUpdate:modelValue":e=>j.value[t]=e},null,8,["modelValue","onUpdate:modelValue"]),A,(0,i.createVNode)(f,{modelValue:H.value[t],"onUpdate:modelValue":e=>H.value[t]=e,min:0,max:1,step:.01,"show-input":!0,style:{"padding-left":"8px"}},null,8,["modelValue","onUpdate:modelValue","step"])])))),128))])),_:1}),(0,i.createVNode)(h,{md:18,sm:24,class:"mona-scroll-hidden right"},{default:(0,i.withCtx)((()=>[(0,i.unref)(J)?((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:0},[(0,i.createVNode)(v,{"model-value":Q.value+1,"onUpdate:modelValue":X,min:1,max:G.value.length,style:{"margin-bottom":"12px"}},null,8,["model-value","max"]),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(J),((e,t)=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:t,class:"result-item"},[(0,i.createElementVNode)("div",M,[(0,i.createElementVNode)("div",null,[(0,i.createVNode)(c,{icon:(0,i.unref)(x.Z),circle:"",text:"",title:"查看面板",onClick:e=>ae(t)},null,8,["icon","onClick"])]),D]),(0,i.createElementVNode)("div",Y,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(J)[t],(e=>((0,i.openBlock)(),(0,i.createBlock)(g.Z,{key:e,item:(0,i.unref)(a).artifacts.value.get(e),buttons:!0,"lock-button":!0,"delete-button":!1,"edit-button":!1,onToggle:t=>oe(e)},null,8,["item","onToggle"])))),128))])])))),128))],64)):((0,i.openBlock)(),(0,i.createElementBlock)("div",R,[(0,i.createVNode)(n)]))])),_:1})])),_:1})])}}}),a()}catch(I){a(I)}}))},83722:function(e,t,n){n.a(e,(async function(e,a){try{var o=n(31658),c=e([o]);o=(c.then?(await c)():c)[0],t["Z"]={name:"AttributeItem",components:{AttributeComposition:o.Z},props:{composition:{},title:{},percentage:{default:!1}},computed:{sum(){let e=0;for(const t in this.composition)e+=this.composition[t];return e},displayValue(){return this.percentage?`${(100*this.sum).toFixed(1)}%`:Math.round(this.sum)}}},a()}catch(i){a(i)}}))},86013:function(e,t,n){n.a(e,(async function(e,a){try{var o=n(21677),c=e([o]);o=(c.then?(await c)():c)[0],t["Z"]={name:"AttributePanel",components:{AttributeItem:o.Z},props:{attribute:{type:Object}},computed:{attack(){let e=this.attribute;return e.attackStatic+e.attackBasic+e.attackPercentage},defend(){let e=this.attribute;return e.defendStatic+e.defendBasic+e.defendPercentage},life(){let e=this.attribute;return e.lifeStatic+e.lifeBasic+e.lifePercentage}}},a()}catch(i){a(i)}}))},55581:function(e,t,n){n.a(e,(async function(e,a){try{var o=n(92714),c=n(50552),i=(n(50657),n(60096),n(33948),n(7502)),l=e([o,i,c]);[o,i,c]=l.then?(await l)():l;t["Z"]={__name:"SelectPreset",props:{modelValue:String},setup(e){const t=(0,i.B)(),n=(0,o.computed)((()=>{let e=[];for(let n of t.allFlat.value)e.push(n.name);return e}));return(t,a)=>{const i=c.BT,l=c.km;return(0,o.openBlock)(),(0,o.createBlock)(l,{"model-value":e.modelValue,"onUpdate:modelValue":a[0]||(a[0]=e=>t.$emit("update:modelValue",e))},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(n),(e=>((0,o.openBlock)(),(0,o.createBlock)(i,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["model-value"])}}},a()}catch(r){a(r)}}))},59173:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{s:function(){return r}});var o=n(92714),c=e([o]);o=(c.then?(await c)():c)[0];const l={key:1,class:"no-item",style:{padding:"8px"}};function r(e,t,n,a,c,i){return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[i.list.length>0?((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,{key:0},(0,o.renderList)(i.list,(e=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:e.name,class:"item"},[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.name),1),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.value.toFixed(3)),1)])))),128)):((0,o.openBlock)(),(0,o.createElementBlock)("div",l," 无加成 "))])}a()}catch(i){a(i)}}))},77072:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{s:function(){return m}});var o=n(92871),c=(n(20048),n(31658)),i=n(92714),l=e([c,i,o]);[c,i,o]=l.then?(await l)():l;const u={class:"attribute-item"},s={class:"title"},d={class:"value"};function m(e,t,n,a,l,r){const m=c.Z,p=o.Q0;return(0,i.openBlock)(),(0,i.createElementBlock)("div",u,[(0,i.createVNode)(p,null,{content:(0,i.withCtx)((()=>[(0,i.createVNode)(m,{composition:n.composition},null,8,["composition"])])),default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("span",s,(0,i.toDisplayString)(n.title),1)])),_:1}),(0,i.createElementVNode)("span",d,(0,i.toDisplayString)(r.displayValue),1)])}a()}catch(r){a(r)}}))},8137:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{s:function(){return m}});var o=n(21677),c=n(92714),i=e([o,c]);[o,c]=i.then?(await i)():i;const r=e=>((0,c.pushScopeId)("data-v-1a788cef"),e=e(),(0,c.popScopeId)(),e),u=r((()=>(0,c.createElementVNode)("h3",{class:"class"},"基础属性",-1))),s=r((()=>(0,c.createElementVNode)("h3",{class:"class"},"进阶属性",-1))),d=r((()=>(0,c.createElementVNode)("h3",{class:"class"},"元素属性",-1)));function m(e,t,n,a,i,l){const r=o.Z;return(0,c.openBlock)(),(0,c.createElementBlock)("div",null,[u,(0,c.createVNode)(r,{title:"生命值",composition:n.attribute.hp},null,8,["composition"]),(0,c.createVNode)(r,{title:"攻击力",composition:n.attribute.atk},null,8,["composition"]),(0,c.createVNode)(r,{title:"防御力",composition:n.attribute.def},null,8,["composition"]),(0,c.createVNode)(r,{title:"元素精通",composition:n.attribute.elemental_mastery},null,8,["composition"]),s,(0,c.createVNode)(r,{title:"暴击率",composition:n.attribute.critical,percentage:!0},null,8,["composition"]),(0,c.createVNode)(r,{title:"暴击伤害",composition:n.attribute.critical_damage,percentage:!0},null,8,["composition"]),(0,c.createVNode)(r,{title:"治疗加成",composition:n.attribute.healing_bonus,percentage:!0},null,8,["composition"]),(0,c.createVNode)(r,{title:"元素充能效率",composition:n.attribute.recharge,percentage:!0},null,8,["composition"]),(0,c.createVNode)(r,{title:"护盾强效",composition:n.attribute.shield_strength,percentage:!0},null,8,["composition"]),d,(0,c.createVNode)(r,{title:"火元素伤害加成",composition:n.attribute.bonus_pyro,percentage:!0},null,8,["composition"]),(0,c.createVNode)(r,{title:"水元素伤害加成",composition:n.attribute.bonus_hydro,percentage:!0},null,8,["composition"]),(0,c.createVNode)(r,{title:"草元素伤害加成",composition:n.attribute.bonus_dendro,percentage:!0},null,8,["composition"]),(0,c.createVNode)(r,{title:"雷元素伤害加成",composition:n.attribute.bonus_electro,percentage:!0},null,8,["composition"]),(0,c.createVNode)(r,{title:"风元素伤害加成",composition:n.attribute.bonus_anemo,percentage:!0},null,8,["composition"]),(0,c.createVNode)(r,{title:"冰元素伤害加成",composition:n.attribute.bonus_cryo,percentage:!0},null,8,["composition"]),(0,c.createVNode)(r,{title:"岩元素伤害加成",composition:n.attribute.bonus_geo,percentage:!0},null,8,["composition"]),(0,c.createVNode)(r,{title:"物理伤害加成",composition:n.attribute.bonus_physical,percentage:!0},null,8,["composition"])])}a()}catch(l){a(l)}}))},31658:function(e,t,n){n.a(e,(async function(e,a){try{var o=n(10698),c=n(88451),i=(n(65524),n(83744)),l=e([o]);o=(l.then?(await l)():l)[0];const r=(0,i.Z)(c.Z,[["render",o.s],["__scopeId","data-v-a1776db8"]]);t["Z"]=r,a()}catch(r){a(r)}}))},21677:function(e,t,n){n.a(e,(async function(e,a){try{var o=n(38378),c=n(75226),i=(n(38014),n(83744)),l=e([o,c]);[o,c]=l.then?(await l)():l;const r=(0,i.Z)(c.Z,[["render",o.s],["__scopeId","data-v-d42f263e"]]);t["Z"]=r,a()}catch(r){a(r)}}))},48004:function(e,t,n){n.a(e,(async function(e,a){try{var o=n(81839),c=n(63665),i=(n(25472),n(83744)),l=e([o,c]);[o,c]=l.then?(await l)():l;const r=(0,i.Z)(c.Z,[["render",o.s],["__scopeId","data-v-1a788cef"]]);t["Z"]=r,a()}catch(r){a(r)}}))},57703:function(e,t,n){n.a(e,(async function(e,a){try{var o=n(49305),c=e([o]);o=(c.then?(await c)():c)[0];const i=o.Z;t["Z"]=i,a()}catch(i){a(i)}}))},17594:function(e,t,n){n.a(e,(async function(e,a){try{n.r(t);var o=n(68761),c=(n(88548),n(83744)),i=e([o]);o=(i.then?(await i)():i)[0];const l=(0,c.Z)(o.Z,[["__scopeId","data-v-5a885f0c"]]);t["default"]=l,a()}catch(l){a(l)}}))},65524:function(){},38014:function(){},25472:function(){},88548:function(){},68761:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{Z:function(){return o.Z}});var o=n(79407),c=e([o]);o=(c.then?(await c)():c)[0],a()}catch(i){a(i)}}))},88451:function(e,t,n){n.d(t,{Z:function(){return a}});n(2707);var a={name:"AttributeComposition",props:["composition"],computed:{list(){let e=[];for(const t in this.composition)e.push({name:t,value:this.composition[t]});return e.sort(((e,t)=>e.name.localeCompare(t.name))),e}}}},75226:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{Z:function(){return o.Z}});var o=n(83722),c=e([o]);o=(c.then?(await c)():c)[0],a()}catch(i){a(i)}}))},63665:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{Z:function(){return o.Z}});var o=n(86013),c=e([o]);o=(c.then?(await c)():c)[0],a()}catch(i){a(i)}}))},49305:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{Z:function(){return o.Z}});var o=n(55581),c=e([o]);o=(c.then?(await c)():c)[0],a()}catch(i){a(i)}}))},10698:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{s:function(){return o.s}});var o=n(59173),c=e([o]);o=(c.then?(await c)():c)[0],a()}catch(i){a(i)}}))},38378:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{s:function(){return o.s}});var o=n(77072),c=e([o]);o=(c.then?(await c)():c)[0],a()}catch(i){a(i)}}))},81839:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{s:function(){return o.s}});var o=n(8137),c=e([o]);o=(c.then?(await c)():c)[0],a()}catch(i){a(i)}}))},89804:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{kN:function(){return l}});var o=n(61067),c=n(384),i=e([c,o]);[c,o]=i.then?(await i)():i;const l={install(e){e.directive("loading",c.t),e.config.globalProperties.$loading=o.g},directive:c.t,service:o.g};a()}catch(l){a(l)}}))}}]);